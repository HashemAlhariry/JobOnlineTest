<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">
    <title>Applicant Sign Up</title>

    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <!-- Main CSS-->
    <link href="css/main.css" rel="stylesheet" media="all">
    <script>
       function validatesignupform(form, event) {
            event.preventDefault();
            var result = true;
            if(document.getElementById("emailerror").innerHTML != ""){
                document.getElementById("emailerror").innerHTML = "";
                form.emailaddressapplicant.style.borderColor = "black";
            }
            if(document.getElementById("passworderror").innerHTML != ""){
                document.getElementById("passworderror").innerHTML = "";
                form.passwordapplicant.style.borderColor = "black";
            }
            if(document.getElementById("usernameerror").innerHTML != ""){
                document.getElementById("usernameerror").innerHTML = "";
                form.usernameapplicant.style.borderColor = "black";
            }
            if(form.usernameapplicant.value == ""){
                form.usernameapplicant.focus();
                form.usernameapplicant.style.borderColor = "red";
                document.getElementById("usernameerror").innerHTML = "please enter username";
                document.getElementById("usernameerror").style.color = "red";
                result = false;
            }
            if (form.emailaddressapplicant.value == "") {
                form.emailaddressapplicant.focus();
                form.emailaddressapplicant.style.borderColor = "red";
                document.getElementById("emailerror").innerHTML = "please enter email";
                document.getElementById("emailerror").style.color = "red";
                result = false;
            }
            if(form.passwordapplicant.value == ""){
                form.passwordapplicant.focus();
                form.passwordapplicant.style.borderColor = "red";
                document.getElementById("passworderror").innerHTML = "please enter password";
                document.getElementById("passworderror").style.color = "red";
                result = false;
            }
            if(!checkusername()){
                form.usernameapplicant.focus();
                form.usernameapplicant.style.borderColor = "red";
                document.getElementById("usernameerror").innerHTML = "username already exists";
                document.getElementById("usernameerror").style.color = "red";
                result = true;
            }
            if(!result){
                return false;
            }
            form.submit();
        }

        //this function check the existence of username in DB
        function checkusername()
        {
                var xhttp = new XMLHttpRequest();
                username=document.getElementById("usernameapplicant")
                xhttp.open("GET", "http://localhost:8081/router/checkusername?username="+username, true);
                xhttp.send();

        }
        
    
   
    </script>
</head>

<body>
    <div class="page-wrapper bg-dark p-t-100 p-b-50">
        <div class="wrapper wrapper--w900">
            <div class="card card-6">
                <div class="card-heading">
                    <h2 class="title">Applicant Sign Up</h2>
                </div>
                <div class="card-body">
                    <form method="GET" action="/router/signup" onsubmit="return validatesignupform(this,event);">
                        <div class="form-row">
                            <div class="name">User Name</div>
                            <div class="value">
                                <input class="input--style-6" type="text" name="usernameapplicant" id = "usernameapplicant">
                                <div id="usernameerror"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">Email address</div>
                            <div class="value">
                                <div class="input-group">
                                    <input class="input--style-6" type="email" name="emailaddressapplicant" placeholder="example@email.com" id = "emailaddressapplicant">
                                    <div id="emailerror"></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">Password</div>
                            <div class="value">
                                <input class="input--style-6" type="password" name ="passwordapplicant" id="passwordapplicant">
                                <div id="passworderror"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">Phone Number</div>
                            <div class="value">
                                <input class="input--style-6" type="number" name="phonenumberapplicant" id="phonenumberapplicant">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">Upload CV</div>
                            <div class="value">
                                <div class="input-group js-input-file">
                                    <input class="input-file" type="file" name="file_cv" id="file">
                                    <label class="label--file" for="file">Choose file</label>
                                    <span class="input-file__info">No file chosen</span>
                                </div>
                                <div class="label--desc">Upload your CV/Resume or any other relevant file. Max file size 50 MB</div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn--radius-2 btn--blue-2" type="submit">Sign Up</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Main JS-->
    <script src="js/global.js"></script>

</body>

</html>
